#include "../include/time.h"

/************************************************************************
* Construtor da classe: inicializa as variaveis da classe com 0.
*************************************************************************
* param (E): Nenhum.
************************************************************************
* return: Nenhum.
************************************************************************
* Histórico
* 16/08/08 - Thiago Mizutani
* Criação.
************************************************************************/

Time::Time()
{
	this->hour = 0;
	this->min = 0;
	this->sec = 0;
	this->msec = 0;
}

/************************************************************************
* Transforma de milesegundos para o formato HH:MM:SS.MMM
*************************************************************************
* param (E): unsigned long msec - Tempo em milisegundos
************************************************************************
* return: Nenhum.
************************************************************************
* Histórico
* 30/07/08 - Fabrício Lopes de Souza
* Criação.
************************************************************************/
void Time::setTime(unsigned long msec)
{
	this->msec = (int)( msec % 1000);
	this->sec  = (int)((msec /1000) % 60);
	this->min  = (int)((msec /60000) % 60);
	this->hour = (int)( msec /3600000);

	return;
}

/***********************************************************************
* transforma de posição física para o formato hh:mm:ss.mmm
************************************************************************
* param (e) : int position => posição do frame no vídeo
* param (e) : double fps => frames por segundo do vídeo
************************************************************************
* return: nenhum.
************************************************************************
* histórico
* 15/08/08 - thiago mizutani
* criação.
************************************************************************/

void Time::pos2time(int position, double fps)
{
	long milisec = 0;

	milisec = position/(int)fps;

	this->setTime(milisec);
}

/***********************************************************************
* Retorna o campo hora do tempo da transição.
************************************************************************
* param (e) : nenhum
************************************************************************
* return: campo hora
************************************************************************
* histórico
* 15/08/08 - thiago mizutani
* criação.
************************************************************************/

int Time::getHour()
{
	return (this->hour);
}

/***********************************************************************
* Retorna o campo minutos do tempo da transição.
************************************************************************
* param (e) : nenhum
************************************************************************
* return: campo minutos
************************************************************************
* histórico
* 15/08/08 - thiago mizutani
* criação.
************************************************************************/

int Time::getMin()
{
	return (this->min);
}

/***********************************************************************
* Retorna o campo segundos do tempo da transição.
************************************************************************
* param (e) : nenhum
************************************************************************
* return: campo segundos 
************************************************************************
* histórico
* 15/08/08 - thiago mizutani
* criação.
************************************************************************/

int Time::getSec()
{
	return (this->sec);
}

/***********************************************************************
* Retorna o campo milisegundos do tempo da transição.
************************************************************************
* param (e) : nenhum
************************************************************************
* return: campo milisegundos
************************************************************************
* histórico
* 15/08/08 - thiago mizutani
* criação.
************************************************************************/

int Time::getMsec()
{
	return (this->msec);
}
