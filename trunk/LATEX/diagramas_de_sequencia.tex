\section{Diagramas de Sequência \label{diagramas_sequencia}}

Nesta Seção serão apresentados os Diagramas de Sequência do sistema.

\subsection{Carregamento do vídeo \label{seq_carrega}}

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/seq_main.PNG}
 \caption{Diagrama de sequência para carregamento do vídeo.}
 \label{img_seq_main}
\end{figure}

\begin{enumerate}
\item{Editor inicia a aplicação;}
\item{Aplicação cria objeto de interface INTERFACE;}
\item{Editor informa o diretório e o vídeo a ser carregado no sistema;}
\item{Aplicação cria objeto VDO responsável pelo armazenamento e manipulação do vídeo carregado;}
\item{Aplicação solicita ao objeto VDO o armazenamento das informações necessárias
do vídeo através da função open();}
\item{Aplicação solicita ao objeto INTERFACE que seja mostrado o vídeo, através da
função showVideo();}
\item{Aplicação solicita ao objeto INTERFACE que seja mostrada a timeline do vídeo, através da
função showTimeline();}
\item{Aplicação devolve ao usuário o vídeo e a timeline carregados na tela;}
\end{enumerate}

\subsection{Detecção de transições geral \label{seq_detecta_geral}}

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/seq_detecta.PNG}
 \caption{Diagrama de sequência para detecção de transições.}
 \label{img_seq_detecta}
\end{figure}

\begin{enumerate}
\item{Usuário solicita ao sistema que seja feita a detecção de transições do vídeo;}
\item{Sistema cria o objeto DT responsável por realizar todo tipo de detecção;}
\item{Objeto DT cria objeto DTC responsável pelas detecções de cortes;}
\item{DT solicita à DTC a detecção de transições do tipo corte;}
\item{DT solicita à INTERFACE a atualização da timeline, marcando-a com os pontos de
ocorrência de cortes detectados;}
\item{Objeto DT cria objeto DTF responsável pelas detecções de fades (tanto fade-in, quanto fade-out);}
\item{DT solicita à DTF a detecção de transições do tipo fade;}
\item{DT solicita à INTERFACE a atualização da timeline, marcando-a com os pontos de
ocorrência de fades detectados;}
\item{Objeto DT cria objeto DTD responsável pela de dissolve;}
\item{DT solicita à DTD a detecção de transições do tipo dissolve;}
\item{DT solicita à INTERFACE a atualização da timeline, marcando-a com os pontos de
ocorrência de dissolve detectados;}
\item{Sistema solicita à VDO que reposicione o cursor da timeline na posição anterior ao processo
de detecção de transições;}

\end{enumerate}

\subsection{Detecção de Cortes \label{seq_cortes}}

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/seq_cortes.PNG}
 \caption{Diagrama de sequência para detecção de cortes.}
 \label{img_seq_corte}
\end{figure}

\begin{enumerate}
\item{DTC solicita à VDO a posição atual do cursor da timeline;}
\item{DTC solicita à VDO o posicionamento do cursor na posição 0 do vídeo, para que
a análise seja feita em todos os frames do vídeo;}
\item{DTC cria objeto VR;}
\item{DTC solicita à VR a criação do Ritmo Visual do vídeo;}
\item{VR obtém a diagonal do frame corrente;}
\item{VR solicita à VDO o próximo frame e repete o passo anterior entrando em um loop até que
não existam mais frames;}
\item{VR retorna para o sistema o Ritmo Visual do vídeo;}
\item{Sistema cria objeto FILTERS;}
\item{Sistema solicita à FILTERS a suavização da imagem;}
\item{FILTERS aplica um filtro passa-baixa e devolve a imagem para o Sistema;}
\item{Sistema solicita a criação do mapa de bordas do Ritmo Visual;}
\item{Sistema solicita à FILTERS a aplicação do operador Sobel;}
\item{FILTERS aplica operador Sobel e devolve o Ritmo Visual ao
sistema;}
\item{Mapa de bordas obtido;}
\item{Sistema define um limiar para classificação das bordas que serão consideradas cortes;}
\item{Sistema realiza a contagem de pontos pertencentes às retas verticais do mapa de bordas, selecionando aquelas
que atingirem o valor do limiar;}
\item{Sistema devolve as transições de corte detectadas;}
\end{enumerate}

\subsection{Detecção de Fades \label{seq_fades}}

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/seq_fade.PNG}
 \caption{Diagrama de sequência para detecção de fades (fade-in e fade-out).}
 \label{img_seq_fade}
\end{figure}

\begin{enumerate}
\item{DTF solicita à VDO a posição atual do ponteiro do video;}
\item{DTF solicita à VDO o posicionamento do ponteiro na posição 0 do vídeo, para que
a análise seja feita em todos os frames do vídeo;}
\item{DTF cria objeto VR;}
\item{DTF solicita à VR a criação do Ritmo Visual por Histograma (RVH);}
\item{VR cria objeto FRAME;}
\item{Loop: Enquanto a posição do frame corrente for diferente do tamanho do video}
\item{VR solicita a VDO o próximo frame do vídeo}
\item{VR solicita ao FRAME a diagonal do frame solicitado}
\item{VR solicita ao FRAME o histograma do frame (diagonal)}
\item{Loop: fim}
\item{DTF calcula as derivadas do RVH}
\item{DTF cria objeto DTFI}
\item{DTF solicita à DTFI a detecção de suas transições}
\item{DTFI calcula a derivada Máxima do RVH}
\item{DTFI retorna as transições do tipo Fade-in}
\item{DTF cria objeto DTFO}
\item{DTF solicita à DTFO a detecção de suas transições}
\item{DTFI calcula a derivada Mínima do RVH}
\item{DTFI retorna as transições do tipo Fade-out}
\item{DTF solicita a VDO a restauração do ponteiro do video}
\end{enumerate}

\subsection{Detecção de dissolve \label{seq_dissolve}}

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/seq_dissolve.PNG}
 \caption{Diagrama de sequência para detecção de dissolve.}
 \label{img_seq_dissolve}
\end{figure}

\begin{enumerate}
\item{DTD solicita à VDO a posição atual do ponteiro do video;}
\item{DTD solicita à VDO o posicionamento do ponteiro na posição 0 do vídeo, para que
a análise seja feita em todos os frames do vídeo;}
\item{DTD cria objeto VR;}
\item{DTD solicita à VR a criação do Ritmo Visual por Histograma (RVH);}
\item{VR cria objeto FRAME;}
\item{Loop: Enquanto a posição do frame corrente for diferente do tamanho do vídeo}
\item{VR solicita a VDO o próximo frame do vídeo}
\item{VR solicita ao FRAME a diagonal do frame solicitado}
\item{VR solicita ao FRAME o histograma do frame (diagonal)}
\item{Loop: fim}
\item{DTD calcula a variância do vídeo}
\item{DTD calcula a segunda derivada da variância}
\item{DTD solicita a VR o cálculo da derivada do RVH}
\item{DTD calcula a razão entre a derivada segunda da variância e a derivada do RVH}
\end{enumerate}

\subsection{Edição de vídeo \label{seq_edicao}}

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/seq_edicao.PNG}
 \caption{Diagrama de sequência para edição de vídeo.}
 \label{img_seq_edicao}
\end{figure}

\begin{enumerate}
\item{Editor solicita ao sistema edição de vídeo;}
\item{Sistema cria objeto BRIGHT;}
\item{Sistema solicita a BRIGHT a aplicação do efeito no vídeo;}
\item{Sistema cria objeto COLOR;}
\item{Sistema solicita a COLOR a aplicação do efeito no vídeo;}
\item{Sistema cria objeto BRIGHT;}
\item{Sistema solicita a CONTRAST a aplicação do efeito no vídeo;}
\end{enumerate}
