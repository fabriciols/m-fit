\section{RESULTADOS OBTIDOS \label{resultados_obtidos}}

\hspace*{1.25cm}Nesta seção serão apresentados os resultados obtidos
com a utilização do M-FIT para realizar a detecção de transições em
alguns vídeos e também sua interface final.

\subsubsection{Resultados obtidos: geral \label{resultados_obtidos_geral}}

\hspace*{0.65cm}A Figura \ref{img:obtidos_preview1} mostra a tela
que será exibida assim que o sistema for inicializado. Nota-se
ainda, que as funções de detecção (marcadas por círculos vermelhos)
ficam desabilitadas enquanto não houver um vídeo carregado no
sistema, assim como a lista para aplicação de efeitos.

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/resultados_obtidos1.png}
 \caption{Tela inicial do sistema.}
 Fonte: Autor.
 \label{img:obtidos_preview1}
\end{figure}

\hspace*{0.65cm}A Figura \ref{img:obtidos_preview2} mostra o sistema
com um vídeo já carregado, é possível observar que ao carregar um
vídeo, a lista com as propriedades do vídeo é automaticamente
carregada, assim como a sua timeline.

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/resultados_obtidos2.png}
 \caption{Tela inicial do sistema.}
 Fonte: Autor.
 \label{img:obtidos_preview2}
\end{figure}

\hspace*{0.65cm}Na Figura \ref{img:obtidos_preview3} pode ser observada a
tela do sistema após o processo de detecção das transições. Nota-se
que cada transição é marcada com uma linha vertical na timeline e
que para cada tipo de transição há uma cor diferente. Ao clicar na
timeline, a tomada é automaticamente marcada por uma linha que vai
da transição inicial até sua transição final.

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/resultados_obtidos3.png}
 \caption{Tela inicial do sistema.}
 Fonte: Autor.
 \label{img:obtidos_preview2}
\end{figure}

\hspace*{0.65cm}Visto que para cada tipo de transição, foi adotada
uma metodologia diferente, esta seção apresentará os resultados
obtidos para cada tipo de detecção separadamente, seguido dos
resultados obtidos com a detecção de todos os tipos de transição.

Para todos os tipos de transições foram utilizados os seguintes vídeos:

\begin{itemize}
\item{Teste.avi}

O vídeo ``Teste'' foi criado pela equipe com o intuito de gerar um
vídeo onde todas as transições sejam ``perfeitas'', sem nenhum tipo
de ruído ou caso atípico.

Transições Presentes:

\subitem{105 - Fade-In}
\subitem{134 - Dissolve}
\subitem{241 - Corte}
\subitem{ 377 - Fade-Out}

\item {Batman.avi}

Vídeo com o trailer do filme: Batman - O Cavaleiro das Trevas.

\item {Ironman.avi}

Vídeo com o trailer do filme: Homem de Ferro (Iron Man).

\end{itemize}

\subsection{Resultados obtidos: Detecção - Cortes \label{resultados_obtidos_cortes}}

\hspace*{1.25cm}Neste tópico serão apresentados os resultados
obtidos em alguns vídeos.

\hspace*{0.65cm}Vídeo em análise: Batman.avi (trailer do filme
Batman - O Cavaleiro das Trevas).

\begin{itemize}
\item{\textbf{Número de frames: } 3859}
\item{\textbf{Número de cortes: } 48}
\item{\textbf{Número de não cortes: } 3811}
\end{itemize}

\hspace*{0.65cm}A Figura \ref{img:rv_batman} mostra o Ritmo Visual
gerado para o vídeo em análise. Nota-se que onde há a ocorrência de
cortes é observada uma mudança brusca nos padrões da imagem. A
partir destes pontos (C1 - C10), pode-se observar que há a formação
de bordas (pontos B1 - B10) quando é aplicado o filtro de Canny
sobre o Ritmo Visual (figura \ref{img:mapa_batman}).

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/rv_batman.png}
 \caption{Ritmo Visual do vídeo Batman.avi.}
 Fonte: Autor.
 \label{img:rv_batman}
\end{figure}

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/mapa_de_bordas_batman.png}
 \caption{Ritmo Visual filtrado com o operador de Canny utilizando limiares $T_{min}$ = 100 e $T_{max}$ = 200.}
 Fonte: Autor.
 \label{img:mapa_batman}
\end{figure}

\begin{table}[htb] % [htb]-> here, top, botton
   \centering   % tabela centralizada
   \large       % tamanho da fonte
   \setlength{\arrayrulewidth}{1\arrayrulewidth}  % espessura da  linha
   \setlength{\belowcaptionskip}{10pt}  % espaço entre caption e tabela
   \caption{\it Transições encontradas pelo sistema no vídeo Batman.avi.}
   \begin{tabular}{|c|c|c|} % c=center, l=left, r=right
        \hline Frame & Validade & Distância do ponto \\
        \hline 1011 & ok & 1 frame\\
        \hline 1896 & ok & 0\\
        \hline 1928 & ok & 1 frame\\
        \hline 1967 & ok & 0\\
        \hline 2105 & ok & 1 frame\\
        \hline 2134 & falhou & ---\\
        \hline 2156 & falhou & ---\\
        \hline 2244 & falhou & ---\\
        \hline 2245 & ok & 0\\
        \hline 2281 & falhou & ---\\
        \hline 2309 & ok & 1 frame\\
        \hline 2322 & ok & 0\\
        \hline 2426 & ok & 0\\
        \hline 2495 & ok & 1 frame\\
        \hline 2540 & ok & 1 frame\\
        \hline 2747 & ok & 0\\
        \hline 2785 & ok & 1 frame\\
        \hline 2879 & ok & 1 frame\\
        \hline 2892 & ok & 1 frame\\
        \hline 2908 & ok & 0 \\
        \hline 2930 & falhou & 0 \\
        \hline 2935 & ok & 1 frame \\
        \hline 2965 & ok & 1 frame \\
        \hline
   \end{tabular}
   \label{tab:resultado_batman}
\end{table}

\hspace*{0.65cm}Em resumo, os resultados obtidos para a detecção de
cortes com esta metodologia foram os seguintes:

\begin{enumerate}
\item{\textbf{Total de detecções:} 23}
\item{\textbf{``True'' positivos:} 18}
\item{\textbf{Falsos positivos:} 5}
\item{\textbf{``True'' negativos:} 3806}
\item{\textbf{Falsos negativos:} 30}
\end{enumerate}

\hspace*{0.65cm}Onde ``Total de detecções'' representa o número de
pontos apontados pelo sistema como locais de ocorrência de cortes,
``True positivos'' representa os pontos detectados pelo sistema em
que realmente existe um corte e ``Falsos negativos'' representa os
pontos detectados pelo sistema em que não havia um corte.

\hspace*{0.65cm}Nota-se pela Tabela \ref{tab:resultado_batman} que
das 23 transições detectadas pelo sistema, apenas 5 não são cortes,
estes certamente são pontos em que há objetos de cena que causaram
grande alteração no padrão da imagem, devido a uma movimentação ou
aproximação da câmera. Além disso, é possível observar que o ponto
da ocorrência da transição apontado pelo sistema é bastante preciso,
variando em, no máximo, 1 frame ao ponto exato da transição.

\hspace*{0.65cm}Apesar do sistema ter detectado um número abaixo do
número total de cortes presentes no vídeo, pode-se dizer que os
resultados foram satisfatórios ao analisar os resultados em função
de falsos positivos e falsos negativos. Desta forma, obtém-se uma
taxa de acerto de 77,65\%, considerando que para a aplicação do
filtro de Canny, o valor do limiar mínimo $T_{min}$ = 100 e o limiar
máximo $T_{max}$ = 200, e para filtrar as bordas verticais e
detectar somente aquelas que realmente forem um corte, foi utilizado
um limiar que corresponde a 45\% da altura do frame. Estes valores
de limiar foram definidos com base em testes realizados no decorrer
deste trabalho, como pode ser observado na Figura
\ref{img:mapa_batman_2}.

\begin{figure}[h|top]
 \centering
 \includegraphics[width=1.0\linewidth]{imagens/mapa_batman_2.png}
 \caption{Ritmo Visual filtrado com o operador de Canny utilizando limiares $T_{min}$ = 20 e $T_{max}$ = 40.}
 Fonte: Autor.
 \label{img:mapa_batman_2}
\end{figure}

\hspace*{0.65cm}Percebe-se que a quantidade de bordas detectadas na
Figura \ref{img:mapa_batman_2} é consideravelmente maior do que a
quantidade de bordas detectadas na figura \ref{img:mapa_batman}.
Isto se deve ao fato de que o limiar mínimo utilizado foi $T_{min}$
= 20 e $T_{max}$ = 40, desta forma, qualquer pixel com luminância
maior que 40 será imediatamente aceito como borda, o que torna o
resultado inválido, visto que bordas são vistas como picos em uma
imagem. Junto disso, o valor do limiar para o tamanho das bordas foi
baixado para 25\%, fazendo com que qualquer borda que ultrapasse
25\% da altura do frame seja aceito como uma borda representativa de
corte, porém bordas deste tamanho podem ser geradas pela simples
movimentação de objetos na cena ou por ruídos.

\hspace*{0.65cm}\textbf{Vídeo em análise:} IronMan.avi (trailer do
filme Homem de Ferro).

\begin{itemize}
\item{\textbf{Número de frames: } 3580}
\item{\textbf{Número de cortes: } 107}
\item{\textbf{Número de não cortes: } 3473}
\end{itemize}

\hspace*{0.65cm}A Tabela \ref{tab:resultados_Iron} mostra os
resultados obtidos com a detecção de cortes utilizando as
configurações padrões.

\begin{table}[htb] % [htb]-> here, top, botton
   \centering   % tabela centralizada
   \tiny       % tamanho da fonte
   \setlength{\arrayrulewidth}{1\arrayrulewidth}  % espessura da  linha
   \setlength{\belowcaptionskip}{10pt}  % espaço entre caption e tabela
   \caption{\it Transições encontradas pelo sistema no vídeo IronMan.avi.}
   \begin{tabular}{|c|c|c|} % c=center, l=left, r=right
        \hline Frame & Validade & Distância do ponto \\
        \hline 254 & ok & 1 frame \\
        \hline 256 & ok & 0 \\
        \hline 300 & ok & 0 \\
        \hline 326 & ok & 1 frame \\
        \hline 425 & ok & 0 \\
        \hline 538 & ok & 1 frame \\
        \hline 580 & ok & 1 frame \\
        \hline 608 & ok & 0 \\
        \hline 732 & ok & 1 frame \\
        \hline 764 & ok & 1 frame \\
        \hline 1072 & ok & 0 \\
        \hline 1088 & ok & 0 \\
        \hline 1173 & ok & 0 \\
        \hline 1175 & ok & 0 \\
        \hline 1179 & ok & 1 frame \\
        \hline 1181 & ok & 0 \\
        \hline 1195 & ok & 1 frame \\
        \hline 1197 & ok & 0 \\
        \hline 1202 & ok & 1 frame \\
        \hline 1204 & ok & 0 \\
        \hline 1218 & ok & 1 frame \\
        \hline 1220 & ok & 0 \\
        \hline 1223 & falhou & --- \\
        \hline 1225 & ok & 1 frame \\
        \hline 1227 & ok & 0 \\
        \hline 1240 & falhou & --- \\
        \hline 1243 & ok & 0 \\
        \hline 1248 & ok  & 1 frame \\
        \hline 1259 & ok & 1 frame \\
        \hline 1351 & ok & 1 frame \\
        \hline 1353 & ok & 0 \\
        \hline 1356 & falhou & --- \\
        \hline 1902 & ok & 0 \\
        \hline 2093 & ok & 1 frame \\
        \hline 2095 & ok & 0 \\
        \hline 2136 & falhou & --- \\
        \hline 2163 & falhou & --- \\
        \hline 2165 & ok & 0 \\
        \hline 2189 & ok & 1 frame \\
        \hline 2190 & ok & 0 \\
        \hline 2247 & ok & 1 frame \\
        \hline 2305 & ok & 1 frame \\
        \hline 2385 & ok & 1 frame \\
        \hline 2396 & falhou &  --- \\
        \hline 2398 & ok & 0 \\
        \hline 2410 & ok & 0 \\
        \hline 2427 & ok & 0 \\
        \hline 2441 & ok & 1 frame \\
        \hline 2453 & falhou & --- \\
        \hline 2488 & falhou & --- \\
        \hline 2696 & ok & 0 \\
        \hline 2792 & falhou & --- \\
        \hline 2900 & ok & 1 frame \\
        \hline 2970 & falhou & --- \\
        \hline 2972 & falhou & --- \\
        \hline 2986 & ok & 1 frame \\
        \hline 3007 & falhou & --- \\
        \hline 3032 & falhou  & --- \\
        \hline 3035 & ok & 0 \\
        \hline 3066 & falhou & --- \\
        \hline 3068 & falhou & --- \\
        \hline 3078 & falhou & --- \\
        \hline 3083 & falhou & --- \\
        \hline 3472 & ok & 1 frame\\
        \hline
   \end{tabular}
   \label{tab:resultados_Iron}
\end{table}

\hspace*{0.65cm}Em resumo, os resultados obtidos foram:

\begin{enumerate}
\item{\textbf{Total de detecções:} 64}
\item{\textbf{``True'' positivos:} 47}
\item{\textbf{Falsos positivos:} 17}
\item{\textbf{``True'' negativos:} 3456}
\item{\textbf{Falsos negativos:} 60}
\end{enumerate}

\hspace*{0.65cm}Novamente os resultados podem ser considerados
satisfatórios se a análise for baseada nos falsos positivos e falsos
negativos, chegado a uma taxa de acerto de 72,18\%.

\hspace*{0.65cm}Através da análise destes 3 vídeos têm-se uma média
de acerto geral de 74,91\%.

\hspace*{0.65cm}\textbf{Vídeo em análise:}Teste.avi (vídeo criado
pela equipe durante a realização deste trabalho).

\begin{itemize}
\item{\textbf{Número de frames: } 385}
\item{\textbf{Número de cortes: } 3}
\item{\textbf{Número de não cortes: } 381}
\end{itemize}

\hspace*{0.65cm}A Tabela \ref{tab:resultados_Teste} mostra os
resultados obtidos com a detecção de cortes utilizando as
configurações padrões.

\begin{table}[htb] % [htb]-> here, top, botton
   \centering   % tabela centralizada
   \tiny       % tamanho da fonte
   \setlength{\arrayrulewidth}{1\arrayrulewidth}  % espessura da  linha
   \setlength{\belowcaptionskip}{10pt}  % espaço entre caption e tabela
   \caption{\it Transições encontradas pelo sistema no vídeo IronMan.avi.}
   \begin{tabular}{|c|c|c|} % c=center, l=left, r=right
        \hline Frame & Validade & Distância do ponto \\
        \hline 51 & ok & 0 \\
        \hline 167 & ok & 0 \\
        \hline
   \end{tabular}
   \label{tab:resultados_Teste}
\end{table}

\hspace*{0.65cm}Em resumo, os resultados obtidos foram:

\begin{enumerate}
\item{\textbf{Total de detecções:} 2}
\item{\textbf{``True'' positivos:} 2}
\item{\textbf{Falsos positivos:} 0}
\item{\textbf{``True'' negativos:} 380}
\item{\textbf{Falsos negativos:} 1}
\end{enumerate}

\hspace*{0.65cm}Com estes resultados, obtém-se uma performance de
99,74\%, chegando próximo à perfeição, porém vale lembrar que este
vídeo foi criado com condições ``perfeitas'' para o processo de
detecção.

\hspace*{0.65cm}A partir destes resultados, é possível afirmar que a
metodologia utilizada para a detecção de cortes apresentou
resultados bastante satisfatórios com um número de falsos negativos
relativamente baixo.

\subsection{Resultados obtidos: Detecção - Fade\label{resultados_obtidos_cortes}}

\hspace*{1.25cm}Neste tópico serão apresentados os resultados obtidos nos
exemplos propostos.

\subsubsection{Vídeo em análise: Teste.avi}

\begin{itemize}
\item{\textbf{Número de frames    : } 2919}
\item{\textbf{Número de Fade-in   : } 51}
\item{\textbf{Número de Fade-out  : } 51}
\item{\textbf{Número de não cortes: } 2868}
\end{itemize}

\subsubsection{Vídeo em análise: Ironman.avi}

\begin{itemize}
\item{\textbf{Número de frames    : } 2919}
\item{\textbf{Número de Fade-in   : } 51}
\item{\textbf{Número de Fade-out  : } 51}
\item{\textbf{Número de não cortes: } 2868}
\end{itemize}

\subsubsection{Vídeo em análise: Batman.avi}

\begin{itemize}
\item{\textbf{Número de frames    : } 2919}
\item{\textbf{Número de Fade-in   : } 51}
\item{\textbf{Número de Fade-out  : } 51}
\item{\textbf{Número de não cortes: } 2868}
\end{itemize}

\subsection{Resultados obtidos: Detecção - Dissolve \label{resultados_obtidos_dissolves}}

\hspace*{1.25cm}Neste tópico serão apresentados os resultados obtidos para dissolve nos exemplos propostos.

\subsubsection{Vídeo em análise: Teste.avi}

\begin{itemize}
\item{\textbf{Número de frames    : } 385}
\item{\textbf{Número de dissolves  : } 3}
\item{\textbf{Número de não dissolves: } 382}
\end{itemize}

\hspace*{0.65cm}Mais especificamente:

\begin{enumerate}
\item{\textbf{Total de detecções:} 3}
\item{\textbf{``True'' positivos:} 3}
\item{\textbf{Falsos positivos:} 0}
\item{\textbf{``True'' negativos:} 382}
\item{\textbf{Falsos negativos:} 0}
\end{enumerate}

\hspace*{0.65cm}Para este vídeo, que foi feito em condições perfeitas,
a taxa de acerto foi de 100\%. Assim, para condições perfeitas,
o método funciona plenamente.

\subsubsection{Vídeo em análise: Ironman.avi}

\begin{itemize}
\item{\textbf{Número de frames    : } 3580}
\item{\textbf{Número de dissolves   : } 7}
\item{\textbf{Número de não dissolves: } 3580}
\end{itemize}

\hspace*{0.65cm}Mais especificamente:

\begin{enumerate}
\item{\textbf{Total de detecções:} 6}
\item{\textbf{``True'' positivos:} 6}
\item{\textbf{Falsos positivos:} 16}
\item{\textbf{``True'' negativos:} 3557}
\item{\textbf{Falsos negativos:} 1}
\end{enumerate}

\hspace*{0.65cm}Para este vídeo, a taxa de acerto foi de 85,71\%.
Este resultado mostra que para um caso real, o método de detecção de
Dissolve apresenta um resultado muito satisfatório.

\subsubsection{Vídeo em análise: Batman.avi}

\begin{itemize}
\item{\textbf{Número de frames    : } 2919}
\item{\textbf{Número de dissolves   : } 4}
\item{\textbf{Número de não dissolves: } 2015}
\end{itemize}

\hspace*{0.65cm}Mais especificamente:

\begin{enumerate}
\item{\textbf{Total de detecções:} 3}
\item{\textbf{``True'' positivos:} 3}
\item{\textbf{Falsos positivos:} 11}
\item{\textbf{``True'' negativos:} 2904}
\item{\textbf{Falsos negativos:} 1}
\end{enumerate}

\hspace*{0.65cm}Observando os resultados, chega-se a conclusão que
a taxa de acerto é de 75\%. Para este vídeo, o resultado foi abaixo do vídeo anterior,
porém o método ainda apresenta um resultado satisfatório para a detecção do Dissolve.

\hspace*{0.65cm}Para a detecção do dissolve, primeiramente foi utilizado
uma metodologia que calcula a razão entre a segunda variância da luminância e
a derivada dos ritmo visual. Porém este método não trouxe resultados esperados,
com uma taxa de erro inviável. Assim, foi desenvolvido um novo método de análise
dos pontos de lumiância do frame juntamente com um threshold definido e um limiar
para separar detecções do tipo fade.
